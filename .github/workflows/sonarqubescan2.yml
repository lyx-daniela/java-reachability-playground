name: building

on: [push]

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - uses: actions/checkout@v2 #checkout latest version of github actions
        - name: Set up JDK 11
          uses: actions/setup-java@v2
          with:
            java-version: '11'
            distribution: 'temurin'
            cache: maven
        - name: Build with maven cloud
          run: mvn -B verify sonar:sonar -Dsonar.projectKey=javaprojectreachability-dan -Dsonar.organization=javaprojectreachability-dan -Dsonar.host.url=https://sonarcloud.io -Dsonar.token=$SONAR_TOKEN
          env:
            GITHUB_TOKEN: ${{secrets.GITHUB_TOKEN}}
            SONAR_TOKEN: ${{secrets.SONAR_TOKEN}}